---
title: "funModeling: Miscellaneous"
output: html_document
---

Miscellaneous
====

Here are some functions that don't fit in the data preparation, selecting best variables nor model accuracy testing

```{r lib, results="hide"}
## Loading fubModeling !
suppressMessages(library(funModeling))
data(heart_disease)
```
<br>
## Part A) Comparing vectors

**What it does?**: Get the elements present (and not) between 2 vectors.

**Machine Learning purpose:** It's a common practice to run several times a variable selecting algorithm, getting in every run different variables. _So what are the new variables?_ and, _what are the ones that are not present anymore?_

```{r}
v1=c("height","weight","age")
v2=c("height","weight","location","q_visits")

res=compare_v(vector_x=v1, vector_y=v2)

# Printint the keys that didn't match
res
```
<br>
## Part B) Sampling training and test data

**What it does?** Split input data into training and test set, retrieving always same sample by setting the seed.

It's important to encapsulate sampling generation in a function so it will return always the same sample (change default samplpe by modifying `seed` parameter).

```{r}
# Training and test data. Percentage of training cases default value=80%.
index_sample=get_sample(data=heart_disease, percentage_tr_rows=0.8)

# It returns a TRUE/FALSE vector same length as 'data' param. TRUE represents that that particular will be hold for training data

## Generating the samples
data_tr=heart_disease[index_sample,]
data_ts=heart_disease[-index_sample,] # excluding all rows that belong to training

# percentage_tr_rows: range value from 0.1 to 0.99, default value=0.8 (80 percent of training data)

```

<br>
## Part C) Correlation table against target variable

**What it does?** It retrieves the well known `R statistic` -which measures **linear** correlation  for all numeric variables _(skipping the string ones)_.


```{r}
correlation_table(data=heart_disease, str_target="has_heart_disease")
```

`R statistic` goes from `1` _positive correlation_ to `-1` _negative correlation_. A value around `0` implies no correlation.
Squaring this number returns the `R squared` statistic (aka `R2`), which goes from `0` _no correlation_ to `1` _high correlation_. 

### C.1) R2 bias problem

**R statistic is highly influenced by outliers and non-linear relationships.**

Outliers can be treated with `prep_outliers` function, present in this package.

Take a look at the **Anscombe's quartet**. These 4 relationships are quite different, but all of them have the same R2: 0.816.


```{r, out.width = 400, fig.retina = NULL, echo=F}
library(knitr)
include_graphics("anscombe_quartet.png")
```



Last plot, and more info about correlation can be found at: [Correlation and dependence](https://en.wikipedia.org/wiki/Correlation_and_dependence)

<br>

## Part D) 
